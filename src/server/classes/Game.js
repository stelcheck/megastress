"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Joined_1 = require("shared/messages/types/Joined");
const Left_1 = require("shared/messages/types/Left");
class Game {
    constructor() {
        this.players = new Map();
    }
    join(player) {
        this.players.set(player.id, player);
        this.broadcast(Joined_1.default, player, player);
    }
    leave(player) {
        this.players.delete(player.id);
        this.broadcast(Left_1.default, player, player);
    }
    broadcast(type, data, skip) {
        this.players.forEach((player, id) => {
            if (skip && skip.id === id) {
                return;
            }
            player.send(type, data);
        });
    }
}
exports.default = Game;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkdhbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSx5REFBaUQ7QUFDakQscURBQTZDO0FBRTdDO0lBQUE7UUFDUyxZQUFPLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUE7SUFxQmpELENBQUM7SUFuQlEsSUFBSSxDQUFDLE1BQWM7UUFDeEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUNuQyxJQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFBO0lBQ3hDLENBQUM7SUFFTSxLQUFLLENBQUMsTUFBYztRQUN6QixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDOUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFBO0lBQ3RDLENBQUM7SUFFTSxTQUFTLENBQXdCLElBQXFCLEVBQUUsSUFBd0IsRUFBRSxJQUFhO1FBQ3BHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFO1lBQ2xDLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzNCLE1BQU0sQ0FBQTtZQUNSLENBQUM7WUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN6QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRjtBQXRCRCx1QkFzQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWVzc2FnZVR5cGUsIHsgTWVzc2FnZVR5cGVEYXRhLCBJTWVzc2FnZVR5cGUgfSBmcm9tICdtZWdhZGF0YS9jbGFzc2VzL01lc3NhZ2VUeXBlJ1xuXG5pbXBvcnQgUGxheWVyIGZyb20gJy4vUGxheWVyJ1xuXG5pbXBvcnQgSm9pbmVkIGZyb20gJ3NoYXJlZC9tZXNzYWdlcy90eXBlcy9Kb2luZWQnXG5pbXBvcnQgTGVmdCBmcm9tICdzaGFyZWQvbWVzc2FnZXMvdHlwZXMvTGVmdCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIHB1YmxpYyBwbGF5ZXJzOiBNYXA8bnVtYmVyLCBQbGF5ZXI+ID0gbmV3IE1hcCgpXG5cbiAgcHVibGljIGpvaW4ocGxheWVyOiBQbGF5ZXIpIHtcbiAgICB0aGlzLnBsYXllcnMuc2V0KHBsYXllci5pZCwgcGxheWVyKVxuICAgIHRoaXMuYnJvYWRjYXN0KEpvaW5lZCwgcGxheWVyLCBwbGF5ZXIpXG4gIH1cblxuICBwdWJsaWMgbGVhdmUocGxheWVyOiBQbGF5ZXIpIHtcbiAgICB0aGlzLnBsYXllcnMuZGVsZXRlKHBsYXllci5pZClcbiAgICB0aGlzLmJyb2FkY2FzdChMZWZ0LCBwbGF5ZXIsIHBsYXllcilcbiAgfVxuXG4gIHB1YmxpYyBicm9hZGNhc3Q8VCBleHRlbmRzIE1lc3NhZ2VUeXBlPih0eXBlOiBJTWVzc2FnZVR5cGU8VD4sIGRhdGE6IE1lc3NhZ2VUeXBlRGF0YTxUPiwgc2tpcD86IFBsYXllcikge1xuICAgIHRoaXMucGxheWVycy5mb3JFYWNoKChwbGF5ZXIsIGlkKSA9PiB7XG4gICAgICBpZiAoc2tpcCAmJiBza2lwLmlkID09PSBpZCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgcGxheWVyLnNlbmQodHlwZSwgZGF0YSlcbiAgICB9KVxuICB9XG59XG4iXX0=